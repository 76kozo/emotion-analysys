# 変更履歴 (Changelog)

このプロジェクトの全ての主要な変更点はこのファイルに記録されます。

## [1.0.0] - 2024-06-08

### ✨ 新機能 (Added)

- **リアルタイム感情分析**: Webカメラからの映像をGoogle Cloud Vision APIに送信し、リアルタイムで感情を分析する基本機能を実装。
- **データ可視化**: 分析結果を3つの主要なグラフで表示。
    - `IntensityChart`: 各感情の現在の強さを表示する棒グラフ。
    - `DistributionChart`: 感情の構成比率を示すドーナツグラフ。
    - `TimelineChart`: 感情の時系列変化を追跡する折れ線グラフ。
- **カスタム凡例**: Chart.jsのデフォルト凡例を置き換え、日本語と絵文字を組み合わせた、より直感的でアクセシブルな凡例を実装 (`CustomLegend.tsx`)。
- **APIキーのユーザー入力**: 開発者のAPIキーをハードコーディングするのではなく、ユーザーが自身のGoogle Cloud Vision APIキーを入力して使用する方式に変更。セキュリティと費用負担の問題を解決。
- **カメラ制御機能**: ユーザーが任意のタイミングでWebカメラのオン/オフを切り替えられる機能を追加し、プライバシーと精神的負担を軽減。
- **顔フレーム描画**: 認識している顔を黄色い四角で囲む機能を追加し、AIがどこを認識しているかを可視化。
- **アノテーション表示**: 検出した顔フレームの上部に、最も可能性の高い感情とその確信度（例: "Surprised: 100%"）をテキストで表示する機能を追加。
- **CSVデータ出力**: 分析した時系列データをCSVファイルとしてダウンロードできる機能を追加。

### 🐛 バグ修正 & リファクタリング (Fixed & Refactored)

- **プロジェクト再構築**: 当初HTML/CSS/JSで開発していたが、レイアウトの複雑性からNext.js, React, TypeScript, Tailwind CSSに技術スタックを移行し、プロジェクトをゼロから再構築。
- **レイアウトの全面改修**: ユーザーからのフィードバックに基づき、複数回にわたる大規模なレイアウト修正を実施。最終的に、ビデオ、グラフ群が画面内に最適に配置される現在の2カラム構成に落ち着く。
- **APIルートの修正**: Next.jsのApp Router規約に合わせ、APIエンドポイントを`pages/api`から`app/api/route.ts`に移動。`404 Not Found`および`405 Method Not Allowed`エラーを解決。
- **設定データの一元管理**: 複数のコンポーネントで重複して定義されていた感情データを`lib/emotionData.ts`に集約し、コードの保守性と一貫性を向上。
- **ツールチップの改善**: 全てのグラフのツールチップをカスタマイズし、カーソルを合わせることで感情の日本語名、絵文字、具体的な数値が表示されるように改善。

### ドキュメント (Documentation)

- `CHANGELOG.md`と`README.md`を作成し、プロジェクトの目的、機能、セットアップ方法、開発経緯を文書化。

## [0.2.0] - 2025-06-07

### 🚀 技術スタックの全面移行

-   **Next.js (React) への移行**:
    -   メンテナンス性と拡張性の問題を解決するため、プロジェクト全体をNext.js、React、TypeScript、Tailwind CSSでゼロから再構築。
    -   プレーンなHTML, CSS, JavaScriptによる初期実装を全て破棄。
-   **コンポーネントベース設計**:
    -   UIを`IntensityChart`, `DistributionChart`, `TimelineChart`などの独立したReactコンポーネントに分割。
    -   Tailwind CSSのグリッドシステムを利用して、堅牢で再現性の高いレイアウトを構築。
-   **ビルド・実行時エラーの修正**:
    -   `autoprefixer`モジュールの欠落によるビルドエラーを修正。
    -   感情データのキーの不整合に起因するランタイムエラーを特定し、修正。

## [0.1.0] - 2025-06-06

### 🎬 初期プロトタイプの開発 (HTML, CSS, JS)

-   **基本機能の実装**:
    -   画面キャプチャ機能、Google Cloud Vision API連携の雛形、Chart.jsによる3つのグラフ描画エリアを実装。
-   **UIの試行錯誤**:
    -   要件定義書と参考UIに基づき、ダークテーマのUIを構築。
    -   CSS GridやFlexboxを用いたレイアウト実装に複数回挑戦するも、レイアウト崩れやUIの不整合といった問題が頻発し、ユーザーの要求品質を満たせず。
-   **プロジェクトの方向転換**:
    -   プレーンなWeb技術のみでの複雑なUI構築の限界をユーザーが指摘。議論の末、よりモダンなフレームワークへの移行を決定。 