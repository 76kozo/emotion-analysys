# Realtime Emotion Analyzer (リアルタイム感情分析アプリ)

[![Deploy with Vercel](https://vercel.com/button)](https://emotion-analysys.vercel.app/)

**[>>> 公開デモはこちら (Live Demo)](https://emotion-analysys.vercel.app/) <<<**

---

このプロジェクトは、Webカメラからの映像を利用して、リアルタイムで人物の感情を分析し、視覚的に表示するWebアプリケーションです。Google Cloud Vision APIを活用し、検出された感情を複数のインタラクティブなグラフで可視化します。ユーザー自身のAPIキーを使用して、セキュアかつプライベートな環境で分析を実行できます。

## ✨ 主な機能

-   **リアルタイム映像取得**: ユーザーのWebカメラから映像をリアルタイムでキャプチャします。
-   **AIによる感情分析**: 取得した映像をGoogle Cloud Vision APIに送信し、顔の表情から複数の感情（喜び、悲しみ、驚きなど）を分析します。
-   **APIキーのユーザー入力**: アプリケーションに開発者のAPIキーを埋め込むのではなく、ユーザーが自身のGoogle Cloud Vision APIキーを入力して利用する方式を採用。これにより、セキュリティを確保し、ユーザーは自身のAPI使用量を管理できます。
-   **多彩なデータ可視化**:
    -   **IntensityChart (強度グラフ)**: 現在の各感情の強度を棒グラフで表示します。
    -   **DistributionChart (分布グラフ)**: 検出された感情の構成比率をドーナツグラフで示します。
    -   **TimelineChart (時系列グラフ)**: 時間の経過と共に各感情の強さがどう変化したかを折れ線グラフで追跡します。
-   **顔の検出とアノテーション**:
    -   AIが認識している顔を黄色い**フレーム**で囲み、どの顔が分析対象か明確に示します。
    -   フレーム上部には、最も確信度の高い感情とパーセンテージ（例: `Surprised: 100%`）が**アノテーション**として表示されます。
-   **CSVデータエクスポート**: 分析セッション中に記録された全時系列データをCSVファイルとしてダウンロードできます。研究やさらなる分析に活用可能です。
-   **アクセシビリティへの配慮**:
    -   知的障害を持つ方々にも直感的に理解しやすいよう、グラフの凡例は「日本語＋絵文字」で表示されます。
    -   目に優しいダークテーマを基調としたモダンなUIデザインを採用しています。

## 感情分析機能について (About the Emotion Analysis Feature)

このアプリケーションに搭載されている感情分析機能は、**Google Cloud Vision API** を利用しています。画像の人物の表情から感情を推定しますが、採用しているAPIの仕様について、および他の主要なクラウドサービスとの比較を以下に記載します。

### 現在の仕様：Google Cloud Vision API

本アプリケーションでは、Google Cloud Vision APIの顔検出機能（Face Detection）を用いて、以下の**4種類の基本的な感情**を分析しています。

*   喜び (Joy)
*   悲しみ (Sorrow)
*   怒り (Anger)
*   驚き (Surprise)

APIは、これらの各感情について、表情にどの程度現れているかの尤度（Likelihood）を返します。

### 他社クラウドAIサービスとの比較

参考として、他の主要なクラウドAIサービスであるAWS (Amazon Rekognition) や Microsoft Azure (Face API) では、より多様な感情を分析することが可能です。将来的な機能拡張を検討する際の参考情報として記載します。

| 感情の種類          | Google Cloud Vision | AWS Rekognition | Azure Face API |
| :------------------ | :-----------------: | :-------------: | :------------: |
| **喜び (Happy)**    |          ✅          |        ✅        |       ✅        |
| **悲しみ (Sad)**    |          ✅          |        ✅        |       ✅        |
| **怒り (Angry)**    |          ✅          |        ✅        |       ✅        |
| **驚き (Surprised)**|          ✅          |        ✅        |       ✅        |
| **恐れ (Fear)**     |                     |        ✅        |       ✅        |
| **嫌悪 (Disgusted)**|                     |        ✅        |       ✅        |
| **穏やか (Calm)**   |                     |        ✅        |                |
| **困惑 (Confused)** |                     |        ✅        |                |
| **軽蔑 (Contempt)** |                     |                 |       ✅        |
| **中立 (Neutral)**  |                     |                 |       ✅        |
| **合計**            |      **4種類**      |    **8種類**    |    **8種類**   |

### 各サービスの特徴

*   **AWS (Amazon Rekognition):** Googleの4感情に加え、「恐れ」「嫌悪」「穏やか」「困惑」といった、より細やかな感情を検出できます。
*   **Microsoft Azure (Face API):** 同様に「恐れ」「嫌悪」のほか、「軽蔑」や「中立（平常）」といった特徴的な感情を分析できます。ただし、Azureの感情分析機能は、Microsoftの「責任あるAI」ポリシーに基づき、利用に際して申請が必要となる場合があります。

### 結論

本アプリケーションでは、プロジェクトの要件に基づき、基本的な4感情の分析に絞って **Google Cloud Vision API** を採用しています。より詳細な感情分析が将来的に必要となる場合は、これらの他社APIの活用も検討課題となります。

## 🚀 使用技術

-   **フレームワーク**: Next.js (App Router)
-   **UIライブラリ**: React
-   **言語**: TypeScript
-   **スタイリング**: Tailwind CSS
-   **グラフ描画**: Chart.js, react-chartjs-2
-   **API**: Google Cloud Vision API

## 💻 セットアップと実行方法

### 前提条件

-   Node.js (v18.x 以上)
-   npm または yarn
-   Google Cloud Platform (GCP) アカウント
-   有効な課金情報が紐づいたGCPプロジェクト
-   プロジェクトで **Cloud Vision API** が有効化されていること
-   上記APIの認証情報として作成された **APIキー**

### インストールから実行まで

1.  **リポジトリをクローン**
    ```bash
    git clone https://github.com/76kozo/emotion-analysys.git
    ```

2.  **プロジェクトディレクトリへ移動**
    ```bash
    cd emotion-analysys
    ```

3.  **依存関係をインストール**
    ```bash
    npm install
    ```

4.  **開発サーバーを起動**
    ```bash
    npm run dev
    ```

5.  **アプリケーションにアクセス**
    -   ブラウザで `http://localhost:3000` を開きます。

6.  **APIキーの入力と分析開始**
    -   画面上部の入力フィールドに、ご自身の **Google Cloud Vision APIキー** を貼り付けます。
    -   `カメラON` ボタンをクリックしてWebカメラを起動します。
    -   `分析開始` ボタンをクリックすると、リアルタイム感情分析が開始されます。

## 📄 ライセンス

このプロジェクトはMITライセンスのもとで公開されています。 